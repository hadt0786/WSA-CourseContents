<!-- *************************************************************
+ Description : BOM - Reading / Writing / Deleting cookies 
+ Author      : Webstack Academy (P) Ltd 
+ Date        : 15-dec-2016
************************************************************** -->

<!-- DOCTYPE html-->
<html>
    <h1>Cookies - Ensure you run them from servers</h1>    
<head>
	<script>
        
		// Function to set / write cookie
		function writeCookie()
		{
			document.cookie = "username=WSA;";
			document.cookie = "expires=Tue, 14 Oct 2014 20:23:32 GMT;";
			document.cookie = "path=/;";
				
			alert(document.cookie);
			
		}
		
		// Functioon to get cookie 
		function userVerify()
        {
			
				//var cookieVal = decodeURIComponent(document.cookie);
                
                cookieVal = document.cookie;
            
				// Dump all cookies in the console 
                console.log("All Cookies : " + cookieVal);
				
				// Cookied are separate by ';',Split them first 
				cookieArray = cookieVal.split(';');
            
                // Flags for checking
                var foundFlag = 0;
                var foundValue;
                
				for(var cIndex=0; cIndex < cookieArray.length; cIndex++){
                
					// Split them again by '=' to get name and values
                    var cookieName  = cookieArray[cIndex].split('=')[0];
					var cookieValue = cookieArray[cIndex].split('=')[1];
                    
                    if (cookieName == "username" && cookieValue == "WSA")
                    {
                        foundFlag = 1;
                        foundValue = cookieValue;
                    }
					//document.write ("Key is : " + cookieName + " and Value is : " + cookieValue + "<br>");
				} 
            
                if (foundFlag ==1)
                    alert("Welcome again :" + foundValue);
                else   
                    alert("User doesn't exist...new user");
		}		
        
        // Delete the cookie 
        function deleteCookie()
        {
            document.cookie = "username=;";
			document.cookie = "expires=Tue, 14 Oct 2014 20:23:32 GMT;";
			document.cookie = "path=/;";
				
			alert(document.cookie);            
                    
        }
        
	</script>
</head>
	<body>
	<button onclick="writeCookie()">Write Cookie</button>
	<button onclick="userVerify()">Verify user</button>    
    <button onclick="deleteCookie()">Delete user</button>
  	</body>
</html>

