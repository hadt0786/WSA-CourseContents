<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <title>Course Lists</title>
    </head>

    <body>

        <h1>Course List</h1>

        <div id="showCourse">
            <button type="button" onclick="loadDoc()">Get Courses</button>
        </div>
        
        <script>

            function createTableFromCourseList(courseList) {
                // create a table
                var table = document.createElement("table");

                //  create the row and set row data

                for (var i = 0; i < courseList.length; i++) {
                    // insert row
                    var tr = table.insertRow(-1);
                    //  insert cell
                    var tcell = tr.insertCell(-1);
                    tcell.innerHTML = courseList[i].name;

                    tcell = tr.insertCell(-1);
                    tcell.innerHTML = courseList[i].author;

                }
                return table;

            }
          
            function loadDoc() {
                // Create a request object
                var xhttp = new XMLHttpRequest();

                // Register the function to be called when server responds
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {

                        var courseList = JSON.parse(this.responseText);
                        console.log(courseList);

                        var table = createTableFromCourseList(courseList);
                        // document.getElementById("demo").innerHTML = this.responseText;  Display
                        // response

                        var divContainer = document.getElementById("showCourse");
                        divContainer.innerHTML = "";
                        divContainer.appendChild(table);
                    }
                };

                xhttp.open("GET", "/api/courses", true); // There is a file called ajax_info.txt on server
                xhttp.send(); // Send the request
            }
        </script>

    </body>
</html>