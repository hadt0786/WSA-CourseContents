<!DOCTYPE html>
<html>
  <head >
    <link rel="stylesheet" href="style.css">

  </head>
<body>

<h1>Course List</h1>

<div id="input">

  <input id="input">
<button type="button" onclick="loadDocByID()">Get Courses By ID</button>




<script>

  function createTablefromCourseList(courseList){
        
   
   var table = document.createElement("table");

   for(var i = 0; i<courseList.length;i++){
     var tr = table.insertRow(-1);

     var cell1= tr.insertCell(-1);
     cell1.innerHTML = courseList[i].name;

     var cell2 = tr.insertCell(-1);
     cell2.innerHTML = courseList[i].author;
   }
    return table; 
    

  }

  function loadDocByID(){
    var xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function(){
      if(this.readyState==4 && this.status==201){

        var data = JSON.parse(this.responseText);
        console.log(data);

        var x = documnt.getElementById("table");
        var y = x.insertRow(-1);
        var z = y.insertCell(-1);
        var a = y.insertCell(-1);
        var b = y.insertCell(-1);
        var c = y.insertCell(-1);
        var d = y.insertCell(-1);
        var e = y.insertCell(-1);

        a.style.border = "1px solid blue";
        z.style.border = "1px solid blue";
        c.style.border = "1px solid blue";
        d.style.border = "1px solid blue";
        e.style.border = "1px solid blue";

        a.innerHTML = data.name;
        z.innerHTML = data.author;
        c.innerHTML = data.price;
        d.innerHTML = data.isPublished;

        e.innerHTML = data.date;
      }
    }
    var b = document.getElementById("input").value;
    xhttp.open("GET","/api/courses/"+b, true);
    xhttp.send();
  }

function loadDoc() {
  // Create a request object
  var xhttp = new XMLHttpRequest();


  // Register the function to be called when server responds
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      //document.getElementById("demo").innerHTML = this.responseText; // Display response
  var courseList = JSON.parse(this.responseText);

    //console.log(courseList);
    createTablefromCourseList(courseList);
  var table = createTablefromCourseList(courseList);
  var divContainer = document.getElementById("courseList");
  divContainer.innerHTML = "";
  divContainer.appendChild(table);

    }
  };

  xhttp.open("GET", "/api/courses", true); // There is a file called ajax_info.txt on server
  xhttp.send(); // Send the request
}

</script>

</body>
</html>
